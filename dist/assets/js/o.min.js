function Mozoom(){this.setSizeClass="s",this.setContainer=$("#content"),this.animationSpeed=1200,$portraitImgWidth=.35,$landscapeImgWidth=.55,$zoomedSetPadding=.3,$(".project-head").hide()}function defineZoomedSize(o){var e=$(window).width(),t=$portraitImgWidth;o.hasClass("landscape")&&(t=$landscapeImgWidth),o.css({height:e*t*o.data("ratio")})}Mozoom.prototype.zoomIn=function(o,e,t){zoomedSet=o.clone(),zoomedSet.children(".set-head").remove(),zoomedSet.addClass("zoomedSet"),$("body").css("overflow","hidden"),zoomedSet.css({position:"absolute",left:0,top:$(window).scrollTop(),width:"100vw",height:"100vh",overflow:"scroll","z-index":20,opacity:0}).appendTo("body").find("img").each(function(){defineZoomedSize($(this))}),zoomedSet.find(".project-head").first().css({"padding-bottom":$(window).height()*$zoomedSetPadding,"margin-bottom":0}),zoomedSet.find("figure").last().css("padding-bottom",$(window).height()*$zoomedSetPadding),zoomedSet.find(".project-head").show(),zoomedTargetImage=zoomedSet.find("figure[data-slug="+e.data("slug")+"]"),pos=zoomedTargetImage.position().top-($(window).height()-zoomedTargetImage.find("img").outerHeight(!1))/2,zoomedSet.scrollTop(pos),t?(clonedImage=e.clone().css({"z-index":15,position:"absolute",left:e.offset().left,top:e.offset().top,width:e.width(),height:"auto"}).attr("id","zoomedImage").appendTo("body"),$("#faderOverlay").fadeIn(.5*this.animationSpeed,function(){zoomedSet.animate({opacity:1},this.animationSpeed)})):($("#faderOverlay").show(),zoomedSet.find(".project-head").css("opacity",0),zoomedSet.css("opacity",1),zoomedSet.scroll(function(){zoomedSet.find(".project-head").animate({opacity:1},this.animationSpeed)}))},Mozoom.prototype.zoomOut=function(o){$("#faderOverlay").hide(),o.fadeOut(.5*this.animationSpeed,function(){$(this).remove(),$("#zoomedImage").remove(),$("body").css("overflow","auto")})},Mozoom.prototype.rebuildZoomedImages=function(){zoomedSet.length&&zoomedSet.find("img").each(function(){defineZoomedSize($(this))})},Mozoom.prototype.zoomToggle=function(o,e,t){!$(".zoomedSet").length&&o&&e?this.zoomIn(o,e,t):this.zoomOut($(".zoomedSet"))},$(document).ready(function(){var i=new Mozoom,t=$(".set figure"),d=$("#featured");function n(i,d,n){var a;return function(){var o=this,e=arguments,t=n&&!a;clearTimeout(a),a=setTimeout(function(){a=null,n||i.apply(o,e)},d),t&&i.apply(o,e)}}n(function(){if($("#mobile-page-header").is(":visible"))$(".set").first().show(),$(".project-head").show(),$("#faderOverlay").hide(),$(".caret").click(function(){var o=$(".set:visible");$(this).hasClass("caret-right")?$(".set:visible").is(":last-child")?(o.hide(),$(".set:first-child").show()):o.hide().next().show():o.is(":first-child")?(o.hide(),$(".set:last-child").show()):o.prev().show()});else{t.click(function(o){if(o.stopPropagation(),$(this).is("figure")){var e="#"+$(this).data("set");i.zoomToggle($(e),$(this),!0)}}),$(window).click(function(){i.zoomToggle()});var o=n(function(){i.rebuildZoomedImages(),e()},250);$(window).resize(o),$("img").mouseenter(function(){$(this).parents(".project").siblings(".set-head").children(".placeholder").text($(this).data("title"))}).mouseleave(function(){$(".set-head .placeholder").text("")}),i.zoomToggle(d,d.find("figure").first(),!1);var e=n(function(){var o=$(".zoomedSet"),e=o.children(".project").children("figure"),t=0;e.each(function(){t+=$(this).outerHeight()}),o.scroll(function(){$(this).scrollTop()+.5*$(window).height()>t&&i.zoomToggle()})},250);e()}})(),$("#mobileInfo").hide(),$("#mobileInfoButton").click(function(){$("#mobileInfo").toggle()})});