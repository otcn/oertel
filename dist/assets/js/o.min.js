function Mozoom(){this.setSizeClass="s",this.setContainer=$("#content"),$zoomedImgMargin=300,$unZoomedImgMargin=120,$faderMovement=2e3,$zoomMovement=2e3,$(".set").each(function(){$(this).find("img").each(function(){$(this).data({ogOuterHeight:$(this).outerHeight(!0)})})})}Mozoom.prototype.zoomIn=function(t,o){ogScrollTop=$(window).scrollTop(),t.css({"z-index":"20"}),t.children(".set-head").fadeOut($faderMovement),$("footer").hide(),ogOffset=t.offset();var i=0,e=0;t.find("img").slice(0,t.find("img").index(o.children().first())).each(function(){e=$(this).hasClass("portrait")?.9*$(window).height()+$zoomedImgMargin:$(this).hasClass("landscape")?.5*$(window).width()*$(this).data("ratio")+$zoomedImgMargin:.9*$(window).height()+$zoomedImgMargin,i+=e}),i+=(o.parent().prevAll(".project").length+1)*$zoomedImgMargin,o.children().hasClass("portrait")?targetImageHeight=.9*$(window).height():o.children().hasClass("landscape")?targetImageHeight=.5*$(window).width()*o.children().data("ratio"):targetImageHeight=.9*$(window).height(),i+=.5*targetImageHeight,i-=.5*$(window).height(),$("#faderOverlay").fadeIn($faderMovement,function(){t.queue("showHeaders",function(){t.find(".project-head").delay($faderMovement).animate({opacity:1})}),headerHeight=parseInt($("header").height(),10),bodyPadding=parseInt($("body").css("padding-top"),10),contentPadding=parseInt($("#content").css("padding-top"),10),realHeaderHeight=headerHeight+bodyPadding+contentPadding,t.queue("zoomIn",function(e){$(this).css({left:ogOffset.left+"px",top:ogOffset.top+realHeaderHeight,position:"absolute"}),e()}).queue("zoomIn",function(e){$(this).animate({left:"0",top:"0",width:"100vw"},{duration:$zoomMovement}),e()}).queue("zoomIn",function(e){$(this).find(".landscape").animate({width:"50vw","margin-bottom":$zoomedImgMargin},{duration:$zoomMovement}),o.is(":last-child")&&o.children().hasClass("landscape")&&o.children().animate({width:"50vw","margin-bottom":.5*($(window).height()-.5*$(window).width()*o.children().data("ratio"))},{duration:$zoomMovement}),e()}).queue("zoomIn",function(e){$(this).find(".portrait, .square").animate({height:"90vh","margin-bottom":$zoomedImgMargin},{duration:$zoomMovement}),(o.is(":last-child")&&o.children().hasClass("portrait")||o.children().hasClass("square"))&&o.children().animate({height:"90vh","margin-bottom":.05*$(window).height()},{duration:$zoomMovement}),e()}).queue("zoomIn",function(e){$(this).find(".project .project-head").animate({"margin-bottom":"300px"},{duration:$zoomMovement}),e()}).queue("zoomIn",function(e){$("html, body").animate({scrollTop:i},{duration:$zoomMovement}),t.dequeue("showHeaders")}).dequeue("zoomIn")}),this.setContainer.css("max-height",$(window).height()),t.addClass("setZoomed")},Mozoom.prototype.zoomOut=function(e,t){e.stop("zoom",!0,!0),e.stop("headers",!0,!0),$("footer").show();var o=0;e.find("img").slice(0,e.find("img").index(t.children().first())).each(function(){$(this).hasClass("portrait")?factor=.25*$(window).height()+$unZoomedImgMargin:$(this).hasClass("landscape")&&(factor=.14*$(window).width()*$(this).data("ratio")+$unZoomedImgMargin),o+=factor}),e.queue("putSetBack",function(){$(this).animate({left:ogOffset.left+"px",top:ogOffset.top,width:"25vw"},$zoomMovement).promise().done(function(){$(this).css({position:"relative",left:"0",top:"0"})}),$(this).children(".set-head").fadeIn($faderMovement),$("#faderOverlay").fadeOut($faderMovement,function(){e.css({"z-index":"0"})})}),e.queue("zoomOut",function(e){$(this).find(".project .project-head").animate({"margin-bottom":0},{duration:$zoomMovement}),e()}).queue("zoomOut",function(e){$(this).find(".landscape").animate({width:"14vw","margin-bottom":$unZoomedImgMargin},{duration:$zoomMovement}),e()}).queue("zoomOut",function(e){$(this).find(".portrait, .square").animate({height:"25vh","margin-bottom":$unZoomedImgMargin},{duration:$zoomMovement}),e()}).queue("zoomOut",function(){$("html, body").animate({scrollTop:o},{duration:$zoomMovement}),e.dequeue("putSetBack")}),e.find(".project-head").animate({opacity:0}).promise().done(function(){e.dequeue("zoomOut")}),this.setContainer.css("max-height","none"),e.removeClass("setZoomed")},Mozoom.prototype.zoomToggle=function(e,t){e.hasClass("setZoomed")?this.zoomOut(e,t):this.zoomIn(e,t)},$(document).ready(function(){$("#overlay").hide(),$(".set-head i").hide();var o=new Mozoom,e=$(".set figure"),t={infinite:!0,adaptiveHeight:!0,arrows:!1};var i,n,a,s,d=(i=function(){$("#mobile-page-header").is(":visible")?(height=$(".slick-active").height(),console.log($(".slick-current").height()),console.log($(".slick-active").height()),$(".page-body").slick(t),$(".slick-list").css("height",height),$(".page-body").addClass("slicked"),$(".caret-left").click(function(){$(".page-body").slick("slickPrev")}),$(".caret-right").click(function(){$(".page-body").slick("slickNext")}),e.unbind("click"),$("img").unbind("mouseenter")):(e.click(function(e){var t="#"+$(this).data("set");o.zoomToggle($(t),$(this))}),$("img").mouseenter(function(){$(this).parents(".project").siblings(".set-head").children(".placeholder").text($(this).data("title"))}).mouseleave(function(){$(".set-head .placeholder").text("")}))},function(){var e=this,t=arguments,o=a&&!s;clearTimeout(s),s=setTimeout(function(){s=null,a||i.apply(e,t)},n),o&&i.apply(e,t)});d(),$(window).resize(function(){$(".page-body").hasClass("slicked")?800<=window.innerWidth&&($(".page-body").slick("unslick"),$(".page-body").removeClass("slicked")):d()}),$(".info").hide(),$(".infoButton").click(function(){$(".info").toggle()})});