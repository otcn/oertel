function Mozoom(){this.setSizeClass="s",this.setContainer=$("#content"),this.animationSpeed=1200,$portraitImgWidth=.35,$landscapeImgWidth=.55,$zoomedSetPadding=.3,$(".project-head").hide()}function toggleScrollLock(o){o?$("html, body").css({overflow:"unset",height:"auto"}):$("html, body").css({overflow:"hidden",height:"100vh"})}function defineZoomedSize(o){var e=$(window).width(),t=$portraitImgWidth;o.hasClass("landscape")&&(t=$landscapeImgWidth),o.css({height:e*t*o.data("ratio")})}Mozoom.prototype.zoomIn=function(o,e,t){zoomedSet=o.clone(),zoomedSet.children(".set-head").remove(),zoomedSet.addClass("zoomedSet"),zoomedSet.css({position:"absolute",left:0,top:$(window).scrollTop(),width:"100vw",height:"100vh",overflow:"scroll","z-index":20,opacity:0}).appendTo("body").removeAttr("id").find("img").each((function(){defineZoomedSize($(this))})),zoomedSet.find(".project-head").first().css({"padding-bottom":$(window).height()*$zoomedSetPadding,"margin-bottom":0}),zoomedSet.find("figure").last().css("padding-bottom",$(window).height()*$zoomedSetPadding),zoomedSet.find(".project-head").show(),zoomedTargetImage=zoomedSet.find("figure[data-slug="+e.data("slug")+"]"),pos=zoomedTargetImage.position().top-($(window).height()-zoomedTargetImage.find("img").outerHeight(!1))/2,zoomedSet.scrollTop(pos),t?(clonedImage=e.clone().css({"z-index":15,position:"absolute",left:e.offset().left,top:e.offset().top,width:e.width(),height:"auto"}).attr("id","zoomedImage").appendTo("body"),$("#faderOverlay").fadeIn(.5*this.animationSpeed,(function(){toggleScrollLock(!1),zoomedSet.animate({opacity:1},this.animationSpeed)}))):($("#faderOverlay").show(),zoomedSet.find(".project-head").css("opacity",0),zoomedSet.css("opacity",1),toggleScrollLock(!1),zoomedSet.scroll((function(){zoomedSet.find(".project-head").animate({opacity:1},this.animationSpeed)})))},Mozoom.prototype.zoomOut=function(o){toggleScrollLock(!0),o.hasClass("featured")&&$("#featured").remove(),$("#faderOverlay").hide(),o.fadeOut(.5*this.animationSpeed,(function(){$(this).remove(),$("#zoomedImage").remove()}))},Mozoom.prototype.rebuildZoomedImages=function(){zoomedSet.length&&zoomedSet.find("img").each((function(){defineZoomedSize($(this))}))},Mozoom.prototype.zoomToggle=function(o,e,t){!$(".zoomedSet").length&&o&&e?this.zoomIn(o,e,t):this.zoomOut($(".zoomedSet"))},$(document).ready((function(){var o=new Mozoom,e=$(".set figure"),t=$("#featured");function i(o,e,t){var i;return function(){var d=this,n=arguments,a=function(){i=null,t||o.apply(d,n)},s=t&&!i;clearTimeout(i),i=setTimeout(a,e),s&&o.apply(d,n)}}i((function(){if($("#mobile-page-header").is(":visible"))$(".set").first().show(),$(".project-head").show(),$("#faderOverlay").hide(),$("#featured").remove(),$(".caret").click((function(){var o=$(".set:visible");$(this).hasClass("caret-right")?$(".set:visible").is(":last-child")?(o.hide(),$(".set:first-child").show()):o.hide().next().show():o.is(":first-child")?(o.hide(),$(".set:last-child").show()):o.prev().show()}));else{e.click((function(e){if(e.stopPropagation(),$(this).is("figure")){var t="#"+$(this).data("set");o.zoomToggle($(t),$(this),!0)}})),$(window).click((function(){o.zoomToggle()}));var d=i((function(){o.rebuildZoomedImages(),n()}),250);$(window).resize(d),$("img").mouseenter((function(){$(this).parents(".project").siblings(".set-head").children(".placeholder").text($(this).data("title"))})).mouseleave((function(){$(".set-head .placeholder").text("")})),o.zoomToggle(t,t.find("figure").first(),!1);var n=i((function(){var e=$(".zoomedSet"),t=e.children(".project").children("figure"),i=0;t.each((function(){i+=$(this).outerHeight()})),e.scroll((function(){console.log("scroll"),$(this).scrollTop()+.5*$(window).height()>i&&o.zoomToggle()}))}),250);n()}}))(),$("#mobileInfo").hide(),$("#mobileInfoButton").click((function(){$("#mobileInfo").toggle()}))}));